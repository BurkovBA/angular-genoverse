!function(){function e(){return function(e){return"Canis familiaris"==e&&(e="Canis lupus familiaris"),e.replace(/ /g,"_").toLowerCase()}}function n(){return function(e){"canis_lupus_familiaris"==e&&(e="canis_familiaris");var n=e.replace(/_/g," ");return n=n.charAt(0).toUpperCase()+n.slice(1)}}function o(){return function(e){return e.toString().match(/^\d+$|^[XYM]$/)?"chr"+e.toString():e.toString()}}function r(e,n){return{restrict:"E",scope:{genome:"=",chromosome:"=",start:"=",end:"=",tracks:"="},template:"<div class='wrap genoverse-wrap'>    <p class='text-muted'>        <span id='genomic-location' class='margin-right-5px'></span>        View in <a href='http://{{domain}}/{{genome.species | urlencodeSpecies}}/Location/View?r={{chromosome}}:{{start}}-{{end}}' id='ensembl-link' target='_blank'>Ensembl</a>        <span ng-show='genome.assembly_ucsc' class='ucsc-link'>|            <a href='http://genome.ucsc.edu/cgi-bin/hgTracks?db={{genome.assembly_ucsc}}&position={{chromosome | chrToUCSC}}%3A{{start}}-{{end}}' target='_blank'>UCSC</a>        </span>    </p><div id='genoverse'></div></div>",controller:["$scope","$element","$attrs","$transclude",function(o,r,t,s){function a(){var t=[Genoverse.Track.Scalebar];o.tracks.forEach(function(e){t.push(e())});var s={container:r.find("#genoverse"),width:$(".container").width(),urlParamTemplate:!1,chr:o.chromosome,start:o.start,end:o.end,species:o.genome.species,genome:e("urlencodeSpecies")(o.genome.species),plugins:["controlPanel","karyotype","resizer","fileDrop"],tracks:t};o.domain=m(o.genome),o.browser=new Genoverse(s),o.browser.on({afterInit:function(){o.genoverseToAngularWatches=i(),o.angularToGenoverseWatches=c(),n(angular.noop)},afterSetRange:function(){n(angular.noop)}})}function i(){var e=o.$watch("browser.species",function(e,n){o.genome=u(e),o.domain=m(o.genome)}),n=o.$watch("browser.chr",function(e,n){o.chromosome=e}),r=o.$watch("browser.start",function(e,n){o.start=e}),t=o.$watch("browser.end",function(e,n){o.end=e});return[e,n,r,t]}function c(){var e=o.$watch("start",function(e,n){angular.equals(e,n)||o.browser.moveTo(o.chromosome,e,o.end,!0)}),n=o.$watch("end",function(e,n){angular.equals(e,n)||o.browser.moveTo(o.chromosome,o.start,e,!0)}),r=o.$watch("chromosome",function(e,n){angular.equals(e,n)||o.browser.moveTo(e,o.start,o.end,!0)}),t=o.$watch("genome",function(e,n){angular.equals(e,n)||(o.genoverseToAngularWatches.forEach(function(e){e()}),o.angularToGenoverseWatches.forEach(function(e){e()}),o.browser.destroy(),delete o.browser,o.chromosome=e.example_location.chromosome,o.start=e.example_location.start,o.end=e.example_location.end,a())});return[t,r,e,n]}function l(){var e=$(".container").width();o.browser.setWidth(e),n(angular.noop)}function u(e){e=e.replace(/_/g," ");for(var n=0;n<genomes.length;n++){if(e.toLowerCase()==genomes[n].species.toLowerCase())return genomes[n];var o=[];if(genomes[n].synonyms.forEach(function(e){o.push(e.toLowerCase())}),o.indexOf(e.toLowerCase())>-1)return genomes[n]}return null}function m(e){var n;return"Ensembl"==e.division?n="ensembl.org":"Ensembl Plants"==e.division?n="plants.ensembl.org":"Ensembl Metazoa"==e.division?n="metazoa.ensembl.org":"Ensembl Bacteria"==e.division?n="bacteria.ensembl.org":"Ensembl Fungi"==e.division?n="fungi.ensembl.org":"Ensembl Protists"==e.division&&(n="protists.ensembl.org"),n}a(),$(window).on("resize",l)}]}}e.$inject=[],n.$inject=[],o.$inject=[],r.$inject=["$filter","$timeout"],angular.module("Genoverse",[]).filter("urlencodeSpecies",e).filter("urldecodeSpecies",n).filter("chrToUCSC",o).directive("genoverse",r)}();
//# sourceMappingURL=/dist/angularjs-genoverse.min.js.map