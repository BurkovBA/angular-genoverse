!function(){function e(){return function(e){return e&&("canis_familiaris"==(e=e.replace(/ /g,"_").toLowerCase())||"canis_lupus_familiaris"==e?e="canis_lupus_familiaris":"gorilla_gorilla"==e||"gorilla_gorilla_gorilla"==e?e="gorilla_gorilla_gorilla":"ceratotherium_simum"==e||"ceratotherium_simum_simum"==e?e="ceratotherium_simum_simum":"dictyostelium_discoideum"!=e&&"dictyostelium_discoideum_ax4"!=e||(e="dictyostelium_discoideum")),e}}function t(){return function(e){return e&&("Canis familiaris"==(e=(e=e.replace(/_/g," ")).charAt(0).toUpperCase()+e.slice(1))||"Canis lupus familiaris"==e?e="Canis familiaris":"Gorilla gorilla"==e||"Gorilla gorilla gorilla"==e?e="Gorilla gorilla":"Ceratotherium simum"==e||"Ceratotherium simum simum"==e?e="Ceratotherium simum":"Dictyostelium discoideum"!=e&&"Dictyostelium discoideum ax4"!=e||(e="Dictyostelium discoideum ax4")),e}}function r(){return function(e){return"chr"+e.toString()}}function a(i,t){return{restrict:"E",scope:{genome:"=",chr:"=",chromosomeSize:"=?",start:"=",end:"=",exampleLocations:"=?",highlights:"=?",plugins:"=?",urlParamTemplate:"=?",useHash:"=?",dragAction:"=?",wheelAction:"=?",isStatic:"=?",saveable:"=?",storageType:"=?",saveKey:"=?",autoHideMessages:"=?",trackAutoHeight:"=?",hideEmptyTracks:"=?"},template:"<div class='wrap genoverse-wrap'>  <div id='genoverse'></div>  <div id='for-tracks'></div></div>",transclude:!0,controller:["$scope","$element","$attrs",function(a,r,e){var o=this;o.trackConfigs=[],o.render=function(){var e=o.parseConfig();a.browser=new Genoverse(e),a.browser.on({afterInit:function(){a.genoverseToAngularWatches=o.setGenoverseToAngularWatches(),a.angularToGenoverseWatches=o.setAngularToGenoverseWatches(),t(angular.noop)},afterSetRange:function(){t(angular.noop)}})},o.parseConfig=function(){var e={container:r.find("#genoverse"),width:r.find("#genoverse").width(),chr:a.chr,start:a.start,end:a.end,genome:i("urlencodeSpecies")(a.genome)},t=[Genoverse.Track.Scalebar];return o.trackConfigs.forEach(function(e){t.push(o.parseTrackConfig(e))}),e.tracks=t,void 0!==a.highlights&&(e.highlights=a.highlights),void 0!==a.plugins?e.plugins=a.plugins:e.plugins=["controlPanel","karyotype","resizer","fileDrop"],e.urlParamTemplate=void 0!==a.urlParamTemplate&&a.urlParamTemplate,void 0!==a.useHash&&(e.useHash=a.useHash),void 0!==a.dragAction&&(e.dragAction=a.dragAction),void 0!==a.wheelAction&&(e.wheelAction=a.wheelAction),void 0!==a.isStatic&&(e.isStatic=a.isStatic),void 0!==a.saveable&&(e.saveable=a.saveable),void 0!==a.storageType&&(e.storageType=a.storageType),void 0!==a.saveKey&&(e.saveKey=a.saveKey),void 0!==a.autoHideMessages&&(e.autoHideMessages=a.autoHideMessages),void 0!==a.trackAutoHeight&&(e.trackAutoHeight=a.trackAutoHeight),void 0!==a.hideEmptyTracks&&(e.hideEmptyTracks=a.hideEmptyTracks),e},o.pushTrackConfig=function(e){o.trackConfigs.push(e)},o.parseTrackConfig=function(e){var t=angular.element.extend({},e),r={};return r.url="function"==typeof t.url?t.url():t.url,delete t.url,t.modelExtra&&(angular.element.extend(r,e.modelExtra),delete t.modelExtra),t.model=t.model.extend(r),t.viewExtra&&(t.view=t.view.extend(viewExtra),delete t.viewExtra),t.controllerExtra&&(t.controller=t.controller.extend(controllerExtra),delete t.controllerExtra),t.extra&&(angular.element.extend(t,t.extra),delete t.extra),Genoverse.Track.extend(t)},o.setGenoverseToAngularWatches=function(){return[a.$watch("browser.chr",function(e,t){a.chr=e}),a.$watch("browser.start",function(e,t){a.start=e}),a.$watch("browser.end",function(e,t){a.end=e}),a.$watch("browser.chromosomeSize",function(e,t){a.chromosomeSize=e})]},o.setAngularToGenoverseWatches=function(){var e=a.$watch("start",function(e,t){angular.equals(e,t)||a.browser.moveTo(a.chr,e,a.end,!0)}),t=a.$watch("end",function(e,t){angular.equals(e,t)||a.browser.moveTo(a.chr,a.start,e,!0)}),r=a.$watch("chr",function(e,t){angular.equals(e,t)||a.browser.moveTo(e,a.start,a.end,!0)});return[a.$watch("genome",function(e,t){angular.equals(e,t)||(a.genoverseToAngularWatches.forEach(function(e){e()}),a.angularToGenoverseWatches.forEach(function(e){e()}),a.browser.destroy(),delete a.browser,a.exampleLocations[e]?(a.chr=a.exampleLocations[e].chr,a.start=a.exampleLocations[e].start,a.end=a.exampleLocations[e].end):alert("Can't find example location for genome ",e),o.render())}),r,e,t,a.$watch("highlights",function(e,t){angular.equals(e,t)||a.browser.addHighlights(e)})]},o.setGenoverseWidth=function(){var e=$(r.find(".genoverse-wrap")).width();a.browser.setWidth(e),t(angular.noop)}}],link:function(e,t,r,a,o){o(function(e){t.find("#for-tracks").append(e)}).detach(),a.render(),$(window).on("resize",a.setGenoverseWidth)}}}function o(){return{restrict:"E",require:"^genoverse",template:"",scope:{model:"=",modelExtra:"=?",view:"=",viewExtra:"=?",controller:"=?",controllerExtra:"=?",extra:"=?",name:"=",height:"=?",resizable:"=?",autoHeight:"=?",hideEmpty:"=?",margin:"=?",border:"=?",unsortable:"=?",url:"=",urlParams:"=?",data:"=?",allData:"=?",dataRequestLimit:"=?",dataType:"=?",xhrFields:"=?",featureHeight:"=?",featureMargin:"=?",color:"=?",fontColor:"=?",fontWeight:"=?",fontHeight:"=?",fontFamily:"=?",labels:"=?",repeatLabel:"=?",bump:"=?",depth:"=?",threshold:"=?",clickTolerance:"=?",id:"=?"},link:function(e,t,r,a){var o={};o.model=e.model,o.view=e.view,e.controller&&(o.controller=e.controller),e.modelExtra&&(o.modelExtra=e.modelExtra),e.viewExtra&&(o.viewExtra=e.viewExtra),e.controllerExtra&&(o.controllerExtra=e.controllerExtra),e.extra&&(o.extra=e.extra),o.name=e.name,o.height=void 0!==e.height?e.height:12,o.resizable=void 0===e.resizable||e.resizable,o.autoHeight=void 0!==e.autoHeight?e.autoHeight:void 0,o.hideEmpty=void 0!==e.hideEmpty?e.hideEmpty:void 0,o.margin=void 0!==e.margin?e.margin:2,o.border=void 0===e.border||e.border,o.unsortable=void 0!==e.unsortable&&e.unsortable,o.url=e.url,o.urlParams=void 0!==e.urlParams?e.urlParams:void 0,o.data=void 0!==e.data?e.data:void 0,o.allData=void 0!==e.allData&&e.allData,o.dataRequestLimit=void 0!==e.dataRequestLimit?e.dataRequestLimit:void 0,o.dataType=void 0!==e.dataType?e.dataType:void 0,o.xhrFields=void 0!==e.xhrFields?e.xhrFields:void 0,o.featureHeight=void 0!==e.featureHeight?e.featureHeight:void 0,o.featureMargin=void 0!==e.featureMargin?e.featureMargin:{top:3,right:1,bottom:1,left:0},o.color=void 0!==e.color?e.color:"#000000",o.fontColor=void 0!==e.fontColor?e.fontColor:void 0,o.fontWeight=void 0!==e.fontWeight?e.fontWeight:"normal",o.fontHeight=void 0!==e.fontHeight?e.fontHeight:10,o.fontFamily=void 0!==e.fontFamily?e.fontFamily:"sans-serif",o.labels=void 0===e.labels||e.labels,o.repeatLabels=void 0!==e.repeatLabels&&e.repeatLabels,null!=e.bump&&(o.bump=e.bump),o.depth=void 0!==e.depth?e.depth:void 0,void 0!==e.threshold&&(o.threshold=e.threshold),o.clickTolerance=void 0!==e.clickTolerance?e.clickTolerance:0,void 0!==e.id&&(o.id=e.id),a.pushTrackConfig(o)}}}e.$inject=[],t.$inject=[],r.$inject=[],a.$inject=["$filter","$timeout"],o.$inject=[],angular.module("Genoverse",[]).filter("urlencodeSpecies",e).filter("urldecodeSpecies",t).filter("chrToUCSC",r).directive("genoverse",a).directive("genoverseTrack",o)}();
//# sourceMappingURL=/dist/angularjs-genoverse.min.js.map