!function(){function e(){return function(e){return"Canis familiaris"==e&&(e="Canis lupus familiaris"),e.replace(/ /g,"_").toLowerCase()}}function t(){return function(e){"canis_lupus_familiaris"==e&&(e="canis_familiaris");var t=e.replace(/_/g," ");return t=t.charAt(0).toUpperCase()+t.slice(1)}}function r(){return function(e){return"chr"+e.toString()}}function o(){return function(e,t){e=e.replace(/_/g," ");for(var r=0;r<t.length;r++){if(e.toLowerCase()==t[r].species.toLowerCase())return console.log("genome = ",t[r]),t[r];var o=[];if(t[r].synonyms.forEach(function(e){o.push(e.toLowerCase())}),o.indexOf(e.toLowerCase())>-1)return console.log("genome = ",t[r]),t[r]}return null}}function a(e,t){return{restrict:"E",scope:{genome:"=",chr:"=",chromosomeSize:"=?",start:"=",end:"=",genomes:"=?",highlights:"=?",plugins:"=?",urlParamTemplate:"=?",useHash:"=?",dragAction:"=?",wheelAction:"=?",isStatic:"=?",saveable:"=?",storageType:"=?",saveKey:"=?",autoHideMessages:"=?",trackAutoHeight:"=?",hideEmptyTracks:"=?"},template:"<div class='wrap genoverse-wrap'>  <div id='genoverse'></div>  <div id='for-tracks'></div></div>",transclude:!0,controller:["$scope","$element","$attrs",function(r,o,a){var i=this;i.trackConfigs=[],i.render=function(){var e=i.parseConfig();r.browser=new Genoverse(e),r.browser.on({afterInit:function(){r.genoverseToAngularWatches=i.setGenoverseToAngularWatches(),r.angularToGenoverseWatches=i.setAngularToGenoverseWatches(),t(angular.noop)},afterSetRange:function(){t(angular.noop)}})},i.parseConfig=function(){var t={container:o.find("#genoverse"),width:$(".container").width(),chr:r.chr,start:r.start,end:r.end,genome:e("urlencodeSpecies")(r.genome)},a=[Genoverse.Track.Scalebar];return i.trackConfigs.forEach(function(e){a.push(i.parseTrackConfig(e))}),t.tracks=a,void 0!==r.highlights&&(t.highlights=r.highlights),t.plugins=void 0!==r.plugins?r.plugins:["controlPanel","karyotype","resizer","fileDrop"],t.urlParamTemplate=void 0!==r.urlParamTemplate&&r.urlParamTemplate,void 0!==r.useHash&&(t.useHash=r.useHash),void 0!==r.dragAction&&(t.dragAction=r.dragAction),void 0!==r.wheelAction&&(t.wheelAction=r.wheelAction),void 0!==r.isStatic&&(t.isStatic=r.isStatic),void 0!==r.saveable&&(t.saveable=r.saveable),void 0!==r.storageType&&(t.storageType=r.storageType),void 0!==r.saveKey&&(t.saveKey=r.saveKey),void 0!==r.autoHideMessages&&(t.autoHideMessages=r.autoHideMessages),void 0!==r.trackAutoHeight&&(t.trackAutoHeight=r.trackAutoHeight),void 0!==r.hideEmptyTracks&&(t.hideEmptyTracks=r.hideEmptyTracks),t},i.pushTrackConfig=function(e){i.trackConfigs.push(e)},i.parseTrackConfig=function(e){var t=angular.element.extend({},e),r={};return r.url="function"==typeof t.url?t.url():t.url,delete t.url,t.modelExtra&&(angular.element.extend(r,e.modelExtra),delete t.modelExtra),t.model=t.model.extend(r),t.viewExtra&&(t.view=t.view.extend(viewExtra),delete t.viewExtra),t.controllerExtra&&(t.controller=t.controller.extend(controllerExtra),delete t.controllerExtra),t.extra&&(angular.element.extend(t,t.extra),delete t.extra),Genoverse.Track.extend(t)},i.setGenoverseToAngularWatches=function(){var e=r.$watch("browser.species",function(e,t){r.genome=e}),t=r.$watch("browser.chr",function(e,t){r.chr=e}),o=r.$watch("browser.start",function(e,t){r.start=e}),a=r.$watch("browser.end",function(e,t){r.end=e}),i=r.$watch("browser.chromosomeSize",function(e,t){r.chromosomeSize=e});return[e,t,o,a,i]},i.setAngularToGenoverseWatches=function(){var t=r.$watch("start",function(e,t){angular.equals(e,t)||r.browser.moveTo(r.chr,e,r.end,!0)}),o=r.$watch("end",function(e,t){angular.equals(e,t)||r.browser.moveTo(r.chr,r.start,e,!0)}),a=r.$watch("chr",function(e,t){angular.equals(e,t)||r.browser.moveTo(e,r.start,r.end,!0)}),n=r.$watch("genome",function(t,o){if(!angular.equals(t,o))if(Genoverse.Genomes.hasOwnAttribute(t)){if(r.genoverseToAngularWatches.forEach(function(e){e()}),r.angularToGenoverseWatches.forEach(function(e){e()}),r.browser.destroy(),delete r.browser,r.genomes&&e("getGenomeObjectByName")(t,r.genomes)){var a=e("getGenomeObjectByName")(t,r.genomes);r.chr=a.example_location.chr,r.start=a.example_location.start,r.end=a.example_location.end}else alert("Example location for genome '"+t+"' not specified");i.render()}else alert("Genome '"+t+"' not found")});return[n,a,t,o]},i.setGenoverseWidth=function(){var e=$(".container").width();r.browser.setWidth(e),t(angular.noop)}}],link:function(e,t,r,o,a){a(function(e){t.find("#for-tracks").append(e)}).detach(),o.render(),$(window).on("resize",o.setGenoverseWidth)}}}function i(){return{restrict:"E",require:"^genoverse",template:"",scope:{model:"=",modelExtra:"=?",view:"=",viewExtra:"=?",controller:"=?",controllerExtra:"=?",extra:"=?",name:"=",height:"=?",resizable:"=?",autoHeight:"=?",hideEmpty:"=?",margin:"=?",border:"=?",unsortable:"=?",url:"=",urlParams:"=?",data:"=?",allData:"=?",dataRequestLimit:"=?",dataType:"=?",xhrFields:"=?",featureHeight:"=?",featureMargin:"=?",color:"=?",fontColor:"=?",fontWeight:"=?",fontHeight:"=?",fontFamily:"=?",labels:"=?",repeatLabel:"=?",bump:"=?",depth:"=?",threshold:"=?",clickTolerance:"=?",id:"=?"},link:function(e,t,r,o){var a={};a.model=e.model,a.view=e.view,e.controller&&(a.controller=e.controller),e.modelExtra&&(a.modelExtra=e.modelExtra),e.viewExtra&&(a.viewExtra=e.viewExtra),e.controllerExtra&&(a.controllerExtra=e.controllerExtra),e.extra&&(a.extra=e.extra),a.name=e.name,a.height=void 0!==e.height?e.height:12,a.resizable=void 0===e.resizable||e.resizable,a.autoHeight=void 0!==e.autoHeight?e.autoHeight:void 0,a.hideEmpty=void 0!==e.hideEmpty?e.hideEmpty:void 0,a.margin=void 0!==e.margin?e.margin:2,a.border=void 0===e.border||e.border,a.unsortable=void 0!==e.unsortable&&e.unsortable,a.url=e.url,a.urlParams=void 0!==e.urlParams?e.urlParams:void 0,a.data=void 0!==e.data?e.data:void 0,a.allData=void 0!==e.allData&&e.allData,a.dataRequestLimit=void 0!==e.dataRequestLimit?e.dataRequestLimit:void 0,a.dataType=void 0!==e.dataType?e.dataType:void 0,a.xhrFields=void 0!==e.xhrFields?e.xhrFields:void 0,a.featureHeight=void 0!==e.featureHeight?e.featureHeight:void 0,a.featureMargin=void 0!==e.featureMargin?e.featureMargin:{top:3,right:1,bottom:1,left:0},a.color=void 0!==e.color?e.color:"#000000",a.fontColor=void 0!==e.fontColor?e.fontColor:void 0,a.fontWeight=void 0!==e.fontWeight?e.fontWeight:"normal",a.fontHeight=void 0!==e.fontHeight?e.fontHeight:10,a.fontFamily=void 0!==e.fontFamily?e.fontFamily:"sans-serif",a.labels=void 0===e.labels||e.labels,a.repeatLabels=void 0!==e.repeatLabels&&e.repeatLabels,void 0!=e.bump&&(a.bump=e.bump),a.depth=void 0!==e.depth?e.depth:void 0,void 0!==e.threshold&&(a.threshold=e.threshold),a.clickTolerance=void 0!==e.clickTolerance?e.clickTolerance:0,void 0!==e.id&&(a.id=e.id),o.pushTrackConfig(a)}}}e.$inject=[],t.$inject=[],r.$inject=[],o.$inject=[],a.$inject=["$filter","$timeout"],i.$inject=[],angular.module("Genoverse",[]).filter("urlencodeSpecies",e).filter("urldecodeSpecies",t).filter("chrToUCSC",r).filter("getGenomeObjectByName",o).directive("genoverse",a).directive("genoverseTrack",i)}();
//# sourceMappingURL=/dist/angularjs-genoverse.min.js.map